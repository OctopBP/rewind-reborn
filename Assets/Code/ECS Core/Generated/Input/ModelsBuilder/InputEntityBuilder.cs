//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by Octop.ComponentModel.CodeGenerators.EntityBuilderGenerator.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System.Linq;
using Sirenix.OdinInspector;
using Rewind.Services;

namespace Octop.ComponentModel {
    public class InputEntityBuilder : MonoBehaviour, IEventListener {
        [SerializeReference, ValueDropdown(nameof(Models))] List<IInputComponentModel> models = new();
        [SerializeReference, ValueDropdown(nameof(Listeners))] List<IInputComponentListener> listeners = new();

	    InputEntity entity;

		static IEnumerable Models = new ValueDropdownList<IInputComponentModel>() {
            { "Time", new InputTimeModel() }
        };

	    static IEnumerable Listeners = new ValueDropdownList<IInputComponentListener>() {
            { "Input Time Listener", new InputInputTimeListener() }
        };

        void Awake() {
		    entity = Contexts.sharedInstance.input.CreateEntity();
		    models.Aggregate(entity, (e, model) => model.Initialize(e));
	    }

        public void registerListeners() => listeners.ForEach(l => l.Register(entity));
        public void unregisterListeners() => listeners.ForEach(l => l.Unregister(entity));
    }
}